{"ast":null,"code":"import _taggedTemplateLiteral from \"/Users/richarddows/Projects/skyTestThree/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _slicedToArray from \"/Users/richarddows/Projects/skyTestThree/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _regeneratorRuntime from \"/Users/richarddows/Projects/skyTestThree/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/richarddows/Projects/skyTestThree/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/richarddows/Projects/skyTestThree/src/containers/displayuser.js\",\n    _templateObject,\n    _templateObject2,\n    _templateObject3,\n    _templateObject4,\n    _templateObject5,\n    _templateObject6;\n\nimport React, { useEffect, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport Moment from 'moment';\nimport styled from 'styled-components';\nimport { getMembers, getMessages } from '../data';\n\nvar formatMessages = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return getMessages();\n\n          case 2:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function formatMessages() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar formatMembers = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return getMembers();\n\n          case 2:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function formatMembers() {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nvar DisplayUser = function DisplayUser(userId) {\n  var location = useLocation();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      messages = _useState2[0],\n      setMessages = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      memberId = _useState4[0],\n      setMemberId = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      member = _useState6[0],\n      setMember = _useState6[1];\n\n  console.log('location', location.state.user);\n  useEffect(function () {\n    var fetchMessages = /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return formatMessages();\n\n              case 2:\n                response = _context3.sent;\n                setMessages(response);\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      return function fetchMessages() {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    var fetchMembers = /*#__PURE__*/function () {\n      var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        var response, user;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return formatMembers();\n\n              case 2:\n                response = _context4.sent;\n                user = response.find(function (r) {\n                  return r.id === location.state.user;\n                });\n                setMember(user);\n\n              case 5:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n\n      return function fetchMembers() {\n        return _ref4.apply(this, arguments);\n      };\n    }();\n\n    fetchMessages();\n    fetchMembers();\n  }, []);\n  useEffect(function () {\n    console.log('useEffect for location');\n    setMemberId(location.state.user);\n  }, [location]);\n\n  var getUserAvatar = function getUserAvatar(id) {\n    return member[0].avatar;\n  };\n\n  var getUserName = function getUserName() {\n    return \"\".concat(member[0].firstName, \" \").concat(member[0].lastName);\n  };\n\n  var sortMessages = function sortMessages() {\n    return messages.sort(function (a, b) {\n      return Moment(b.timestamp).unix() - Moment(a.timestamp).unix();\n    });\n  };\n\n  console.log('memberId', memberId);\n  console.log('member', member);\n  console.log('messages', messages);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, member[0] && /*#__PURE__*/React.createElement(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 21\n    }\n  }, \"Messages for \", member[0].firstName, \" \", member[0].lastName), messages.length > 1 && sortMessages(messages).map(function (m) {\n    return /*#__PURE__*/React.createElement(MessageSection, {\n      key: m.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(MessageArticle, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Message, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(MessageText, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 15\n      }\n    }, m.message), /*#__PURE__*/React.createElement(MessageTime, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 15\n      }\n    }, Moment(m.timestamp))), /*#__PURE__*/React.createElement(Avatar, {\n      alt: \"Avatar for \".concat(getUserName()),\n      src: getUserAvatar(),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }\n    })));\n  }));\n};\n\nvar MessageSection = styled.section(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  background-color: #ffffee;\\n  min-height: 25px;\\n  margin: 0 5% 5px;\\n  width: 90%;\\n\"])));\nvar MessageArticle = styled.article(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  border: 1px solid #cccccc;\\n  display: flex;\\n  flex-end: justify-content;\\n  margin: 0;\\n\"])));\nvar Avatar = styled.img(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n  flex: 0 1 100px;\\n  height: 100px;\\n  width: 100px;\\n\"])));\nvar Message = styled.p(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\n  align-content: flex-start;\\n  align-items: flex-start;\\n  flex: 0 1 100%;\\n\"])));\nvar MessageText = styled.span(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex: 0 1 100%;\\n  margin: 0;\\n  padding: 0 0 0 10px;\\n\"])));\nvar MessageTime = styled.span(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex: 0 1 100%;\\n  padding: 0 0 0 10px;\\n\"])));\nexport default DisplayUser;","map":{"version":3,"sources":["/Users/richarddows/Projects/skyTestThree/src/containers/displayuser.js"],"names":["React","useEffect","useState","useLocation","Moment","styled","getMembers","getMessages","formatMessages","formatMembers","DisplayUser","userId","location","messages","setMessages","memberId","setMemberId","member","setMember","console","log","state","user","fetchMessages","response","fetchMembers","find","r","id","getUserAvatar","avatar","getUserName","firstName","lastName","sortMessages","sort","a","b","timestamp","unix","length","map","m","message","MessageSection","section","MessageArticle","article","Avatar","img","Message","p","MessageText","span","MessageTime"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport Moment from 'moment';\nimport styled from 'styled-components';\nimport { getMembers, getMessages } from '../data';\n\nconst formatMessages = async () => await getMessages();\n\nconst formatMembers = async () => await getMembers();\n\nconst DisplayUser = (userId) => {\n  const location = useLocation();\n  const [messages, setMessages] = useState([]);\n  const [memberId, setMemberId] = useState(\"\");\n  const [member, setMember] = useState([]);\n  console.log('location', location.state.user);\n\n  useEffect(() => {\n    const fetchMessages = async () => {\n      const response = await formatMessages();\n      setMessages(response);\n    };\n\n    const fetchMembers = async () => {\n      const response = await formatMembers();\n      const user = response.find(r => r.id === location.state.user);\n      setMember(user);\n    };\n\n    fetchMessages();\n    fetchMembers();\n  }, []);\n\n  useEffect(() => {\n    console.log('useEffect for location');\n    setMemberId(location.state.user);\n  }, [location]);\n\n  const getUserAvatar = (id) => {\n    return member[0].avatar;\n  };\n\n  const getUserName = () => {\n    return `${member[0].firstName} ${member[0].lastName}`;\n  };\n\n  const sortMessages = () => {\n    return messages.sort((a, b) => Moment(b.timestamp).unix() - Moment(a.timestamp).unix());\n  };\n\n  console.log('memberId', memberId);\n  console.log('member', member);\n  console.log('messages', messages);\n  return (\n    <>\n      {member[0] && <h1>Messages for {member[0].firstName} {member[0].lastName}</h1>}\n      {messages.length > 1 && sortMessages(messages).map(m => (\n        <MessageSection key={m.id}>\n          <MessageArticle>\n            <Message>\n              <MessageText>{m.message}</MessageText>\n              <MessageTime>{Moment(m.timestamp)}</MessageTime>\n            </Message>\n            <Avatar alt={`Avatar for ${getUserName()}`} src={getUserAvatar()} />\n          </MessageArticle>\n        </MessageSection>\n      ))}\n    </>\n  );\n};\n\nconst MessageSection = styled.section`\n  background-color: #ffffee;\n  min-height: 25px;\n  margin: 0 5% 5px;\n  width: 90%;\n`;\n\nconst MessageArticle = styled.article`\n  border: 1px solid #cccccc;\n  display: flex;\n  flex-end: justify-content;\n  margin: 0;\n`;\n\nconst Avatar = styled.img`\n  flex: 0 1 100px;\n  height: 100px;\n  width: 100px;\n`;\n\nconst Message = styled.p`\n  align-content: flex-start;\n  align-items: flex-start;\n  flex: 0 1 100%;\n`;\n\nconst MessageText = styled.span`\n  display: flex;\n  flex: 0 1 100%;\n  margin: 0;\n  padding: 0 0 0 10px;\n`;\n\nconst MessageTime = styled.span`\n  display: flex;\n  flex: 0 1 100%;\n  padding: 0 0 0 10px;\n`;\n\nexport default DisplayUser;"]},"metadata":{},"sourceType":"module"}